<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <title>데이터 내보내기</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200" />
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@400;500;700&display=swap');

        :root {
            --zepeto-purple: #7C4DFF;
            --zepeto-bg: #FFFFFF;
            --zepeto-gray: #F8F9FB;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, "Apple SD Gothic Neo", "Noto Sans KR", sans-serif;
            background-color: var(--zepeto-bg);
            color: #1A1A1A;
            margin: 0;
            -webkit-tap-highlight-color: transparent;
            word-break: keep-all;
            overflow-x: hidden;
        }

        /* Accordion Animation */
        .accordion-content {
            max-height: 0;
            overflow: hidden;
            transition: max-height 0.3s ease-out, opacity 0.3s ease-out;
            opacity: 0;
        }
        .accordion-content.open {
            max-height: 500px;
            opacity: 1;
            margin-top: 16px;
        }

        /* Scroll Box for Policy */
        .policy-box {
            height: 120px;
            overflow-y: auto;
            background: #F2F2F7;
            border-radius: 16px;
            padding: 16px;
            font-size: 13px;
            color: #666;
            line-height: 1.6;
            border: 1px solid #E5E5EA;
        }
        .policy-box::-webkit-scrollbar {
            width: 4px;
        }
        .policy-box::-webkit-scrollbar-thumb {
            background: #D1D1D6;
            border-radius: 10px;
        }

        /* Checkbox */
        .check-box {
            width: 24px;
            height: 24px;
            border: 2px solid #D1D1D6;
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.2s cubic-bezier(0.4, 0, 0.2, 1);
            background: #fff;
        }
        .check-box.active {
            background-color: var(--zepeto-purple);
            border-color: var(--zepeto-purple);
        }
        .check-box .material-symbols-outlined {
            color: #fff;
            font-size: 18px;
            font-weight: bold;
            display: none;
        }
        .check-box.active .material-symbols-outlined {
            display: block;
        }
        .check-box.disabled {
            background-color: #F2F2F7;
            opacity: 0.5;
        }

        /* Fixed Button Area */
        .action-area {
            position: fixed;
            bottom: 0;
            left: 0;
            right: 0;
            background: linear-gradient(to top, #fff 80%, rgba(255,255,255,0));
            padding: 20px 20px calc(24px + env(safe-area-inset-bottom)) 20px;
            z-index: 100;
        }

        .z-button {
            background-color: var(--zepeto-purple);
            color: #fff;
            font-weight: 700;
            font-size: 16px;
            border-radius: 30px;
            height: 58px;
            width: 100%;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.2s;
        }
        .z-button.disabled {
            background-color: #E5E5EA;
            color: #AEAEE2;
            pointer-events: none;
        }
        .z-button:active { transform: scale(0.97); }

        /* Modal */
        #modal-overlay {
            position: fixed;
            inset: 0;
            background: rgba(0,0,0,0.6);
            z-index: 1000;
            display: none;
            align-items: center;
            justify-content: center;
            padding: 24px;
            backdrop-filter: blur(4px);
        }
        .modal-body {
            background: #fff;
            width: 100%;
            max-width: 320px;
            border-radius: 32px;
            padding: 32px 24px;
            text-align: center;
            animation: popUp 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275);
        }
        @keyframes popUp {
            from { transform: scale(0.9); opacity: 0; }
            to { transform: scale(1); opacity: 1; }
        }
    </style>
</head>
<body>

    <!-- Top App Bar -->
    <header class="h-14 flex items-center px-2 sticky top-0 bg-white z-50">
        <button class="w-12 h-12 flex items-center justify-center">
            <span class="material-symbols-outlined text-[28px]">chevron_left</span>
        </button>
        <h1 class="flex-1 text-center text-[17px] font-bold mr-12">데이터 내보내기</h1>
    </header>

    <main class="px-5 pt-6 pb-40">
        <div class="mb-8">
            <h2 class="text-[24px] font-bold leading-tight mb-3">개인정보 데이터를<br>파일로 보내드릴까요?</h2>
            <p class="text-[#8E8E8E] text-[15px] font-medium leading-relaxed">준비된 데이터는 계정에 연결된 이메일로 안전하게 전송됩니다.</p>
        </div>

        <!-- Accordion Section -->
        <div class="bg-[#F8F9FB] rounded-[24px] p-5 mb-4" id="accordion-trigger">
            <div class="flex items-center justify-between cursor-pointer">
                <div class="flex items-center">
                    <div class="w-10 h-10 bg-white rounded-2xl flex items-center justify-center shadow-sm mr-4">
                        <span class="material-symbols-outlined text-purple-600 text-[24px]" style="font-variation-settings: 'FILL' 1;">dataset</span>
                    </div>
                    <span class="font-bold text-[16px]">포함되는 데이터 항목</span>
                </div>
                <span class="material-symbols-outlined text-[#AEAEB2] transition-transform duration-300" id="arrow-icon">expand_more</span>
            </div>
            
            <div class="accordion-content" id="accordion-content">
                <div class="space-y-4 border-t border-[#E5E5EA] pt-4">
                    <div class="flex items-start">
                        <div class="w-1 h-1 rounded-full bg-purple-400 mt-2 mr-3 flex-shrink-0"></div>
                        <p class="text-[14px] text-[#48484A] leading-relaxed">
                            <span class="font-bold">기본 정보:</span> 프로필 이름, 제페토 ID, 가입일, 국가 정보 등
                        </p>
                    </div>
                    <div class="flex items-start">
                        <div class="w-1 h-1 rounded-full bg-purple-400 mt-2 mr-3 flex-shrink-0"></div>
                        <p class="text-[14px] text-[#48484A] leading-relaxed">
                            <span class="font-bold">활동 및 콘텐츠:</span> 팔로워/팔로잉 목록, 포스팅 텍스트, 아이템 구매 내역, 메시지(DM) 대화 기록
                        </p>
                    </div>
                    <div class="flex items-start">
                        <div class="w-1 h-1 rounded-full bg-purple-400 mt-2 mr-3 flex-shrink-0"></div>
                        <p class="text-[14px] text-[#48484A] leading-relaxed">
                            <span class="font-bold">설정 정보:</span> 차단 목록, 푸시 알림 설정, 연동된 소셜 계정 정보
                        </p>
                    </div>
                </div>
            </div>
        </div>

        <!-- Email View -->
        <div class="bg-white border border-[#F2F2F7] rounded-[24px] p-5 mb-8">
            <h3 class="font-bold text-[13px] text-[#8E8E93] mb-2 uppercase tracking-wide">수신 이메일</h3>
            <div class="flex justify-between items-center">
                <span class="text-[16px] font-semibold text-[#1C1C1E]">kihunzzan@gmail.com</span>
                <button class="text-[#7C4DFF] font-bold text-[13px] bg-[#F2EEFF] px-3 py-1.5 rounded-full">변경</button>
            </div>
        </div>

        <!-- Policy & Agreement -->
        <div class="mb-4">
            <h3 class="font-bold text-[15px] mb-3 px-1 text-[#1C1C1E]">개인정보 처리 주의사항</h3>
            <div class="policy-box" id="policy-box">
                [데이터 내보내기 안내 및 주의사항]<br><br>
                1. 본 서비스는 제페토 서비스 이용 과정에서 생성된 본인의 개인정보 데이터를 파일 형태로 제공하는 서비스입니다.<br><br>
                2. 데이터 생성 요청 시, 시스템 상황에 따라 파일 준비까지 최대 48시간이 소요될 수 있으며 완료 시 이메일로 알림이 발송됩니다.<br><br>
                3. 보안을 위해 이메일 내 포함된 다운로드 링크는 발송 후 7일간만 유효하며, 이후에는 링크가 만료되어 다시 신청해야 합니다.<br><br>
                4. 제공되는 데이터 파일은 본인의 책임 하에 안전하게 보관하여야 하며, 분실 또는 유출 시 당사는 책임을 지지 않습니다.<br><br>
                5. 특히 메시지 대화 내용 등 민감한 정보가 포함되어 있으므로 공용 PC에서의 다운로드를 지양해 주시기 바랍니다.<br><br>
                --- 여기까지 읽으시면 동의가 활성화됩니다 ---
            </div>
            <p id="scroll-hint" class="text-[11px] text-red-500 mt-2 px-1 font-medium">※ 위 주의사항을 끝까지 읽어야 동의할 수 있습니다.</p>
        </div>

        <div class="flex items-start cursor-pointer transition-opacity duration-200 opacity-40 pointer-events-none" id="agree-area">
            <div class="check-box mr-4 mt-0.5" id="check-box">
                <span class="material-symbols-outlined">check</span>
            </div>
            <p class="text-[14px] text-[#3A3A3C] font-medium leading-relaxed">
                개인정보 데이터 내보내기 주의사항을 모두 확인하였으며, 데이터 생성을 요청합니다.
            </p>
        </div>
    </main>

    <!-- Bottom Action -->
    <div class="action-area">
        <button id="submit-btn" class="z-button disabled shadow-lg">
            데이터 내보내기 신청
        </button>
    </div>

    <!-- Success Modal -->
    <div id="modal-overlay">
        <div class="modal-body">
            <div class="w-20 h-20 bg-[#F2EEFF] rounded-full flex items-center justify-center mx-auto mb-6">
                <span class="material-symbols-outlined text-[#7C4DFF] text-[44px] font-bold">check</span>
            </div>
            <h3 class="text-[20px] font-bold mb-3">신청이 완료되었습니다</h3>
            <p class="text-[#8E8E93] text-[15px] leading-relaxed mb-8 px-2">
                데이터 준비가 완료되면 등록된 이메일로 링크를 보내드릴게요!
            </p>
            <button onclick="closeModal()" class="w-full bg-[#F2F2F7] text-[#1A1A1A] font-bold py-4 rounded-2xl active:scale-95 transition-transform">
                확인
            </button>
        </div>
    </div>

    <script>
        // 1. Accordion Logic
        const accordionTrigger = document.getElementById('accordion-trigger');
        const accordionContent = document.getElementById('accordion-content');
        const arrowIcon = document.getElementById('arrow-icon');

        accordionTrigger.onclick = () => {
            const isOpen = accordionContent.classList.toggle('open');
            arrowIcon.style.transform = isOpen ? 'rotate(180deg)' : 'rotate(0deg)';
        };

        // 2. Scroll-to-Agree Logic
        const policyBox = document.getElementById('policy-box');
        const agreeArea = document.getElementById('agree-area');
        const scrollHint = document.getElementById('scroll-hint');
        let hasReadToBottom = false;

        policyBox.onscroll = () => {
            if (hasReadToBottom) return;
            
            // Check if scroll is at bottom (with 5px buffer)
            const isAtBottom = policyBox.scrollHeight - policyBox.scrollTop <= policyBox.clientHeight + 5;
            
            if (isAtBottom) {
                hasReadToBottom = true;
                agreeArea.style.opacity = '1';
                agreeArea.style.pointerEvents = 'auto';
                scrollHint.style.display = 'none';
                policyBox.style.borderColor = '#7C4DFF';
            }
        };

        // 3. Agreement & Submit Logic
        const checkBox = document.getElementById('check-box');
        const submitBtn = document.getElementById('submit-btn');
        const overlay = document.getElementById('modal-overlay');
        let isChecked = false;

        agreeArea.onclick = () => {
            if (!hasReadToBottom) return;
            isChecked = !isChecked;
            if (isChecked) {
                checkBox.classList.add('active');
                submitBtn.classList.remove('disabled');
            } else {
                checkBox.classList.remove('active');
                submitBtn.classList.add('disabled');
            }
        };

        submitBtn.onclick = () => {
            overlay.style.display = 'flex';
        };

        function closeModal() {
            overlay.style.display = 'none';
        }
    </script>
</body>
</html>
